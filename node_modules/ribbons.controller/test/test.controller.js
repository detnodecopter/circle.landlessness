var assert = require('assert');

var Controller = require('../index');

// setup keyboard sensor
var Keyboard = require('ribbons.sensors.keyboard.mac');
var keyboard = new Keyboard();
var keyboard2 = new Keyboard();

// setup say actuator
var Say = require('ribbons.actuators.say.mac');
var bruce =new Say('Bruce');

function MainController() {
  Controller.call(this);
}
Controller.as(MainController);

MainController.prototype.init = function (key) {
  this.sensors = {
    keyboard: keyboard,
    keyboard2: keyboard2
  };
  this.actuators = {
    bruce: bruce
  };
  this
    .onto(keyboard, 'stroke')
    .onto(keyboard2, 'stroke');
}

MainController.prototype.onKeyboardStroke = function (key) {
  bruce.say(words[key] || 'please press f, b or w');
}

MainController.prototype.onKeyboard2Stroke = function (key) {
  bruce.say(words[key] || 'please press f, b or w');
}

var words = {
  f: 'flywheel',
  b: 'brake drum',
  w: 'chevy impala wheel'
}

mainController = new MainController();

keyboard.start();
keyboard2.start();
mainController.init();
mainController.start();

assert.equal(mainController.sensors.keyboard,keyboard);
assert.equal(mainController.sensors.keyboard2,keyboard2);
assert.equal(mainController.actuators.bruce,bruce);

